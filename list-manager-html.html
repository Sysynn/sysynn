<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List Manager</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <style>
        .dialog-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
        }
        .dialog {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
        }
        .selected {
            background-color: #EBF5FF;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="p-6 max-w-md mx-auto bg-white rounded-lg shadow mt-10">
        <button onclick="openAddDialog()" class="w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mb-4 flex items-center justify-center">
            <span class="mr-2">+</span>
            Add Lesson
        </button>

        <div id="list-container" class="border rounded-lg overflow-hidden">
            <!-- Items will be inserted here -->
        </div>

        <div class="flex space-x-2 mt-4">
            <button onclick="editSelected()" id="editBtn" disabled class="flex-1 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center">
                <span class="mr-2">âœŽ</span>
                Edit
            </button>
            <button onclick="deleteSelected()" id="deleteBtn" disabled class="flex-1 bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 disabled:opacity-50 flex items-center justify-center">
                <span class="mr-2">ðŸ—‘</span>
                Delete
            </button>
        </div>
    </div>

    <!-- Add Dialog -->
    <div id="addDialog" class="dialog-overlay">
        <div class="dialog">
            <h2 class="text-lg font-bold mb-4">Add New Lesson</h2>
            <input type="text" id="addInput" class="w-full border p-2 rounded mb-4" placeholder="Enter lesson title">
            <div class="flex justify-end space-x-2">
                <button onclick="closeAddDialog()" class="px-4 py-2 border rounded">Cancel</button>
                <button onclick="addItem()" class="px-4 py-2 bg-blue-500 text-white rounded">Add</button>
            </div>
        </div>
    </div>

    <!-- Edit Dialog -->
    <div id="editDialog" class="dialog-overlay">
        <div class="dialog">
            <h2 class="text-lg font-bold mb-4">Edit Lesson</h2>
            <input type="text" id="editInput" class="w-full border p-2 rounded mb-4" placeholder="Enter new title">
            <div class="flex justify-end space-x-2">
                <button onclick="closeEditDialog()" class="px-4 py-2 border rounded">Cancel</button>
                <button onclick="saveEdit()" class="px-4 py-2 bg-blue-500 text-white rounded">Save</button>
            </div>
        </div>
    </div>

    <script>
        let items = [];
        let selectedIndex = null;

        function renderList() {
            const container = document.getElementById('list-container');
            if (items.length === 0) {
                container.innerHTML = '<div class="p-4 text-center text-gray-500">No items yet. Click "Add Lesson" to get started.</div>';
                return;
            }

            container.innerHTML = items.map((item, index) => `
                <div class="flex items-center p-3 border-b last:border-b-0 hover:bg-gray-50 ${selectedIndex === index ? 'selected' : ''}"
                     onclick="selectItem(${index})">
                    <span class="flex-grow">${item}</span>
                    <div class="flex items-center space-x-2">
                        <button onclick="moveItem(${index}, 'up')" 
                                class="p-1 hover:bg-gray-200 rounded" 
                                ${index === 0 ? 'disabled' : ''}>
                            â–²
                        </button>
                        <button onclick="moveItem(${index}, 'down')" 
                                class="p-1 hover:bg-gray-200 rounded"
                                ${index === items.length - 1 ? 'disabled' : ''}>
                            â–¼
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function selectItem(index) {
            selectedIndex = index;
            document.getElementById('editBtn').disabled = false;
            document.getElementById('deleteBtn').disabled = false;
            renderList();
        }

        function moveItem(index, direction) {
            event.stopPropagation();
            if (direction === 'up' && index > 0) {
                [items[index], items[index - 1]] = [items[index - 1], items[index]];
                selectedIndex = index - 1;
            } else if (direction === 'down' && index < items.length - 1) {
                [items[index], items[index + 1]] = [items[index + 1], items[index]];
                selectedIndex = index + 1;
            }
            renderList();
        }

        function openAddDialog() {
            document.getElementById('addDialog').style.display = 'block';
            document.getElementById('addInput').value = '';
            document.getElementById('addInput').focus();
        }

        function closeAddDialog() {
            document.getElementById('addDialog').style.display = 'none';
        }

        function addItem() {
            const input = document.getElementById('addInput');
            const value = input.value.trim();
            if (value) {
                items.push(value);
                closeAddDialog();
                renderList();
            }
        }

        function editSelected() {
            if (selectedIndex !== null) {
                document.getElementById('editDialog').style.display = 'block';
                document.getElementById('editInput').value = items[selectedIndex];
                document.getElementById('editInput').focus();
            }
        }

        function closeEditDialog() {
            document.getElementById('editDialog').style.display = 'none';
        }

        function saveEdit() {
            const input = document.getElementById('editInput');
            const value = input.value.trim();
            if (value && selectedIndex !== null) {
                items[selectedIndex] = value;
                closeEditDialog();
                renderList();
            }
        }

        function deleteSelected() {
            if (selectedIndex !== null) {
                items = items.filter((_, index) => index !== selectedIndex);
                selectedIndex = null;
                document.getElementById('editBtn').disabled = true;
                document.getElementById('deleteBtn').disabled = true;
                renderList();
            }
        }

        // Initialize
        renderList();

        // Enter key handling for dialogs
        document.getElementById('addInput').addEventListener('keyup', function(event) {
            if (event.key === 'Enter') addItem();
        });

        document.getElementById('editInput').addEventListener('keyup', function(event) {
            if (event.key === 'Enter') saveEdit();
        });
    </script>
</body>
</html>